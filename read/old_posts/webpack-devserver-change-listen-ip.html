<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Webpack 开发服务器 更换服务端口/IP - 徐天乐 :: 技术博客</title>
    <link rel="stylesheet" href="/mdui/css/mdui.min.css" />
    <link rel="stylesheet" href="/highlight.js/style.min.css" />
    <script src="/mdui/js/mdui.min.js"></script>
    <script>
        function jump(url) {
            window.location.href = url;
        }

        function autodetect() {
            if (!window.matchMedia('(prefers-color-scheme: dark)').matches) {
                mdui.JQ("body").removeClass("mdui-theme-layout-dark");
            }
        }

        mdui.JQ(document).ready(function() {
            autodetect();
        });
    </script>
    <style>
        body,
        html {
            height: 100%;
        }

        .mdui-theme-layout-dark .mdui-typo code {
            color: #eeeeee !important;
        }
    </style>
</head>

<body class="mdui-appbar-with-toolbar mdui-theme-layout-dark mdui-theme-primary-blue mdui-drawer-body-left" style="height: 100%;">
    <header>
        <div class="mdui-appbar mdui-appbar-fixed">
            <div class="mdui-toolbar mdui-color-theme-900">
                <a href="javascript:;" mdui-drawer="{target: '#drawer-main'}" class="mdui-btn mdui-btn-icon mdui-ripple"><i class="mdui-icon material-icons">menu</i></a>
                <a href="/" class="mdui-typo-headline mdui-ripple">徐天乐 :: 技术博客</a>
                <a href="javascript:;" class="mdui-typo-title mdui-ripple">Webpack 开发服务器 更换服务端口/IP</a>
                <div class="mdui-toolbar-spacer"></div>
                <a href="/" class="mdui-btn mdui-btn-icon mdui-ripple"><i class="mdui-icon material-icons">home</i></a>
                <a href="https://www.xtlsoft.top/zh-cn" class="mdui-btn mdui-btn-icon mdui-ripple"><i class="mdui-icon material-icons">account_circle</i></a>
            </div>
        </div>
    </header>
    <div class="mdui-drawer" id="drawer-main">
        <ul class="mdui-list mdui-ripple">
                                        <li class="mdui-list-item mdui-ripple">
                    <i class="mdui-list-item-icon mdui-icon material-icons">home</i>
                    <div onclick="jump('/');" class="mdui-list-item-content">首页</div>
                </li>
                            <li class="mdui-list-item mdui-ripple">
                    <i class="mdui-list-item-icon mdui-icon material-icons">list</i>
                    <div onclick="jump('/categories.html');" class="mdui-list-item-content">分类</div>
                </li>
                            <li class="mdui-list-item mdui-ripple">
                    <i class="mdui-list-item-icon mdui-icon material-icons">archive</i>
                    <div onclick="jump('/archive.html');" class="mdui-list-item-content">归档</div>
                </li>
                            <li class="mdui-list-item mdui-ripple">
                    <i class="mdui-list-item-icon mdui-icon material-icons">link</i>
                    <div onclick="jump('/link.html');" class="mdui-list-item-content">友情链接</div>
                </li>
                            <li class="mdui-list-item mdui-ripple">
                    <i class="mdui-list-item-icon mdui-icon material-icons">account_circle</i>
                    <div onclick="jump('https://www.xtlsoft.top/zh-cn');" class="mdui-list-item-content">个人主页</div>
                </li>
                            <li class="mdui-list-item mdui-ripple">
                    <i class="mdui-list-item-icon mdui-icon material-icons">mail</i>
                    <div onclick="jump('mailto:xtl@xtlsoft.top');" class="mdui-list-item-content">Mail</div>
                </li>
                    </ul>
    </div>
    <div id="main" style="margin: 0px 15px; min-height: 90%;"><div class="mdui-typo">
    <h1>
        Webpack 开发服务器 更换服务端口/IP        <br />
        <small>
            作者: xtlsoft &nbsp; &nbsp;
            时间: 2017-07-25 11:33:08 &nbsp; &nbsp;
            分类: 旧稿        </small>
    </h1>
    <div>
        <h2>由来</h2>
<p>想着，<a href="http://www.iviewui.com" title="iViewUI">iViewUI</a>这么好看，可真是要试一试。
原来直接用 CDN 引用，总是不能加载所有样式。
现在，想试试用 NodeJS 和 Webpack 以及 CLI Tool 来试试。（于是我就上菜鸟教程花半个小时学了一下 NodeJS 和 Webpack，事实上发现不必要）</p>
<h2>需求</h2>
<p>我是在 VBox 下的 Ubuntu 16.04 LTS 下面尝试的，用的 NAT 映射，把在 8888 端口的 KodExplorer 映射出来写代码。
然而，<code>npm run dev</code>命令监听的是 <code>127.0.0.1:8888</code>，VBox 的 NAT 映射，只可以映射监听 0.0.0.0（全 IP）的服务。
想着，改源码！</p>
<h2>实现</h2>
<p>查找别人的博客，发现了有人说<code>dev-server.js</code>是监听端口的程序。
那么，强制改掉里面监听的段，就可以了！
使用 KodExplorer 的全文循环搜索功能，发现工作目录内一共有 3 个类似的文件：</p>
<ul>
<li>/node_modules/webpack/hot/dev-server.js</li>
<li>/node_modules/webpack/hot/only-dev-server.js</li>
<li>/node_modules/webpack/hot/webpack-dev-server.js</li>
</ul>
<p>先看别人播客里面提到的<code>dev-server.js</code>，然而，里面连个<code>localhost</code>或<code>127.0.0.1</code>都没有，排除。
<code>only-dev-server.js</code>也不行。
而<code>webpack-dev-server.js</code>才是我们要改的文件。
我们只需要在 366 行</p>
<pre><code class="language-javascript">addDevServerEntrypoints(wpOpt, options);
</code></pre>
<p>后添加 3 行：</p>
<pre><code class="language-javascript">/*@@@@@@@@@@@@@@@@@@@@@@@@@@@@*/
options.host = &quot;0.0.0.0&quot;;
/*@@@@@@@@@@@@@@@@@@@@@@@@@@@@*/
</code></pre>
<p>（这么多<code>@</code>是为了标识）
就可以了（<code>0.0.0.0</code>你也可以改为其他 IP）。</p>
<h2>其他</h2>
<p>博客换上 Editor.md 了！比 fckeditor 好用不知多少倍:joy:！</p>
    </div>
</div>
<link rel="stylesheet" href="/comment/comment.css" />
<script src="/comment/md5.js" type="text/javascript"></script>
<script src="/comment/comment.js" type="text/javascript"></script>
<div class="mdui-typo">
    <br />
    <h1>评论</h1>
</div>
<div id="comment_base"></div>
<script>
    window.commentPresenter.init("#comment_base");
</script><script>
    mdui.JQ("table").addClass("mdui-table mdui-table-hoverable");
</script>
</div>
<div class="mdui-color-theme" style="height: 75px; margin: 0;">
    <div class="mdui-container">
        <div class="mdui-typo" style="height: 75px; margin: 0;">
            <p align="center" style="height: 75px; line-height: 75px; margin: 0;">
                &copy; xtlsoft 2016-2022            </p>
        </div>
    </div>    </div>
        </body>
    <script type="text/javascript" src="/highlight.js/highlight.min.js"></script>
    <script type="text/javascript">hljs.initHighlightingOnLoad();</script>
</html>